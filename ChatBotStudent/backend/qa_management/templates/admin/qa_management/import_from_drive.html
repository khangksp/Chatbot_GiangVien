{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}Import t·ª´ Google Drive | Django Admin{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">Trang ch·ªß</a>
    &rsaquo; <a href="{% url 'admin:qa_management_qaentry_changelist' %}">Q&A Entries</a>
    &rsaquo; Import t·ª´ Google Drive
</div>
{% endblock %}

{% block content %}
<div class="module aligned" style="max-width: 800px;">
    <h1>üì• Import Q&A t·ª´ Google Drive</h1>
    
    <div class="form-row" style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-left: 4px solid #17a2b8;">
        <h3 style="color: #17a2b8; margin-top: 0;">‚ÑπÔ∏è Th√¥ng tin quan tr·ªçng</h3>
        <ul style="margin: 0;">
            <li><strong>Ngu·ªìn d·ªØ li·ªáu:</strong> File QA.csv tr√™n Google Drive</li>
            <li><strong>H√†nh ƒë·ªông:</strong> Import t·∫•t c·∫£ Q&A t·ª´ Drive v√†o database</li>
            <li><strong>X·ª≠ l√Ω tr√πng l·∫∑p:</strong> Entries c√≥ c√πng STT s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t</li>
            <li><strong>Backup:</strong> Khuy·∫øn ngh·ªã t·∫°o backup tr∆∞·ªõc khi import</li>
        </ul>
    </div>
    
    <div class="form-row" style="margin: 20px 0; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107;">
        <h3 style="color: #856404; margin-top: 0;">‚ö†Ô∏è L∆∞u √Ω</h3>
        <ul style="margin: 0; color: #856404;">
            <li>Thao t√°c n√†y s·∫Ω ghi ƒë√® d·ªØ li·ªáu hi·ªán t·∫°i v·ªõi d·ªØ li·ªáu t·ª´ Drive</li>
            <li>C√°c entries kh√¥ng c√≥ trong Drive s·∫Ω kh√¥ng b·ªã x√≥a</li>
            <li>Ki·ªÉm tra k·∫øt n·ªëi Google Drive tr∆∞·ªõc khi th·ª±c hi·ªán</li>
        </ul>
    </div>
    
    <form method="post" style="margin-top: 30px;">
        {% csrf_token %}
        
        <div class="form-row">
            <div class="field-box">
                <h2>X√°c nh·∫≠n Import</h2>
                <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën import d·ªØ li·ªáu t·ª´ Google Drive kh√¥ng?</p>
                
                <div style="margin: 20px 0;">
                    <label>
                        <input type="checkbox" id="confirm_import" required>
                        T√¥i hi·ªÉu v√† mu·ªën ti·∫øp t·ª•c import t·ª´ Google Drive
                    </label>
                </div>
                
                <div style="margin: 20px 0;">
                    <label>
                        <input type="checkbox" id="create_backup">
                        T·∫°o backup d·ªØ li·ªáu hi·ªán t·∫°i tr∆∞·ªõc khi import (khuy·∫øn ngh·ªã)
                    </label>
                </div>
            </div>
        </div>
        
        <div class="submit-row">
            <input type="submit" value="üöÄ B·∫Øt ƒë·∫ßu Import" class="default" 
                   onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën import t·ª´ Google Drive?');">
            <a href="{% url 'admin:qa_management_qaentry_changelist' %}" class="button cancel-link">
                H·ªßy b·ªè
            </a>
        </div>
    </form>
    
    <div class="form-row" style="margin-top: 30px; padding: 15px; background: #d4edda; border-left: 4px solid #28a745;">
        <h3 style="color: #155724; margin-top: 0;">üí° G·ª£i √Ω</h3>
        <p style="margin: 0; color: #155724;">
            Sau khi import th√†nh c√¥ng, h√£y ch·∫°y l·ªánh 
            <code>python manage.py rebuild_faiss_index</code> 
            ƒë·ªÉ c·∫≠p nh·∫≠t index cho chatbot.
        </p>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const confirmCheckbox = document.getElementById('confirm_import');
    const submitButton = document.querySelector('input[type="submit"]');
    
    confirmCheckbox.addEventListener('change', function() {
        submitButton.disabled = !this.checked;
        if (this.checked) {
            submitButton.style.opacity = '1';
        } else {
            submitButton.style.opacity = '0.5';
        }
    });
    
    // Initially disable submit button
    submitButton.disabled = true;
    submitButton.style.opacity = '0.5';
});
</script>
{% endblock %}